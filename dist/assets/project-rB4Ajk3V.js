import{_ as R,M as le,a as ae,b as se}from"./Sidebar-Bbf3v_0a.js";import{_ as oe}from"./DarkModeToggle-BIKOY0Fe.js";import{m as q,w as I,r as v,o as A,i as re,c as w,g as b,a as e,f as m,v as y,p as V,j as N,e as $,b as k,u as ne,h as S,q as C,d as D,l as P,F as z,k as de,t as h,n as T,s as ie}from"./index-WoJbifkH.js";import{_ as ue}from"./1-DMypz6sB.js";const pe={class:"flex flex-col gap-1"},be={class:"flex flex-col gap-1"},me={class:"flex flex-col gap-1"},fe={class:"flex flex-col gap-1"},ge={__name:"FilterForm",props:{filters:Object,onClose:Function},emits:["update:filters","clearFilters"],setup(j,{emit:f}){const i=j,d=f,a=q({...i.filters});I(()=>i.filters,s=>{Object.assign(a,s)});function u(){d("update:filters",{...a}),i.onClose?.()}function g(){Object.assign(a,{dateFrom:"",dateTo:"",status:"",department:""}),d("clearFilters"),i.onClose?.()}const x=v(null);function c(s){x.value&&!x.value.contains(s.target)&&i.onClose?.()}return A(()=>{document.addEventListener("mousedown",c)}),re(()=>{document.removeEventListener("mousedown",c)}),(s,t)=>(b(),w("div",{ref_key:"popoverRef",ref:x,class:"absolute z-50 top-full left-0 mt-2 w-80 max-w-[90vw] bg-white dark:bg-gray-800 p-4 rounded-xl shadow-xl border dark:border-gray-700",dir:"rtl"},[e("form",{onSubmit:$(u,["prevent"]),class:"space-y-3 text-sm"},[e("div",pe,[t[4]||(t[4]=e("label",{for:"dateFrom",class:"font-semibold text-gray-700 dark:text-gray-300"}," تاريخ البداية من: ",-1)),m(e("input",{type:"date",id:"dateFrom","onUpdate:modelValue":t[0]||(t[0]=n=>a.dateFrom=n),class:"form-input"},null,512),[[y,a.dateFrom]])]),e("div",be,[t[5]||(t[5]=e("label",{for:"dateTo",class:"font-semibold text-gray-700 dark:text-gray-300"}," تاريخ الانتهاء إلى: ",-1)),m(e("input",{type:"date",id:"dateTo","onUpdate:modelValue":t[1]||(t[1]=n=>a.dateTo=n),class:"form-input"},null,512),[[y,a.dateTo]])]),e("div",me,[t[7]||(t[7]=e("label",{for:"status",class:"font-semibold text-gray-700 dark:text-gray-300"}," الحالة: ",-1)),m(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=n=>a.status=n),class:"form-input"},t[6]||(t[6]=[N('<option value="" data-v-f0954e31>كل الحالات</option><option value="مكتمل" data-v-f0954e31>مكتمل</option><option value="جاري التنفيذ" data-v-f0954e31>جاري التنفيذ</option><option value="متأخر" data-v-f0954e31>متأخر</option><option value="تحت المراجعة" data-v-f0954e31>تحت المراجعة</option>',5)]),512),[[V,a.status]])]),e("div",fe,[t[9]||(t[9]=e("label",{for:"department",class:"font-semibold text-gray-700 dark:text-gray-300"}," القسم: ",-1)),m(e("select",{id:"department","onUpdate:modelValue":t[3]||(t[3]=n=>a.department=n),class:"form-input"},t[8]||(t[8]=[e("option",{value:""},"كل الأقسام",-1),e("option",{value:"تقنية المعلومات"},"تقنية المعلومات",-1),e("option",{value:"الموارد البشرية"},"الموارد البشرية",-1),e("option",{value:"الاتصالات"},"الاتصالات",-1)]),512),[[V,a.department]])]),e("div",{class:"flex justify-between gap-3 pt-3"},[e("button",{type:"button",onClick:g,class:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 px-3 py-2 rounded transition"}," مسح "),t[10]||(t[10]=e("button",{type:"submit",class:"flex-1 bg-primary hover:bg-primary-dark text-white px-3 py-2 rounded transition"}," تطبيق ",-1))])],32)],512))}},ve=R(ge,[["__scopeId","data-v-f0954e31"]]),ce={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},xe={class:"sm:col-span-2"},ye={key:0,class:"sm:col-span-2 mt-2"},we=["src"],J={__name:"ModalAdd",emits:["close","save"],setup(j,{emit:f}){const i=f,d=v(!0),a=q({name:"",manager:"",field:"",startDate:"",endDate:"",status:"",image:null});function u(){d.value=!1,i("close")}function g(s){const t=s.target.files[0];if(t){const n=new FileReader;n.onload=()=>{a.image=n.result},n.readAsDataURL(t)}else a.image=null}function x(){a.name="",a.manager="",a.field="",a.startDate="",a.endDate="",a.status="",a.image=null}function c(){i("save",{...a}),x(),u()}return(s,t)=>d.value?(b(),w("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center overflow-y-auto px-2 py-6",onClick:u},[e("div",{class:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-lg shadow-lg p-4 sm:p-6 relative mx-auto mt-16",onClick:t[6]||(t[6]=$(()=>{},["stop"]))},[e("button",{onClick:u,class:"absolute top-2 left-2 text-gray-400 hover:text-gray-700 text-3xl font-bold","aria-label":"إغلاق المودال"},"×"),t[16]||(t[16]=e("h2",{class:"text-xl font-bold mb-4 text-center text-gray-800 dark:text-white"}," إضافة مشروع جديد ",-1)),e("form",{onSubmit:$(c,["prevent"]),class:"text-right text-gray-900 dark:text-gray-100",enctype:"multipart/form-data"},[e("div",ce,[e("div",null,[t[7]||(t[7]=e("label",{for:"projectName",class:"block mb-1 font-semibold"},"اسم المشروع",-1)),m(e("input",{id:"projectName","onUpdate:modelValue":t[0]||(t[0]=n=>a.name=n),type:"text",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.name]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"projectManager",class:"block mb-1 font-semibold"},"مدير المشروع",-1)),m(e("input",{id:"projectManager","onUpdate:modelValue":t[1]||(t[1]=n=>a.manager=n),type:"text",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.manager]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"projectField",class:"block mb-1 font-semibold"},"المجال",-1)),m(e("input",{id:"projectField","onUpdate:modelValue":t[2]||(t[2]=n=>a.field=n),type:"text",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.field]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"startDate",class:"block mb-1 font-semibold"},"تاريخ البداية",-1)),m(e("input",{id:"startDate","onUpdate:modelValue":t[3]||(t[3]=n=>a.startDate=n),type:"date",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.startDate]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"endDate",class:"block mb-1 font-semibold"},"تاريخ الانتهاء",-1)),m(e("input",{id:"endDate","onUpdate:modelValue":t[4]||(t[4]=n=>a.endDate=n),type:"date",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.endDate]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"projectStatus",class:"block mb-1 font-semibold"},"الحالة",-1)),m(e("select",{id:"projectStatus","onUpdate:modelValue":t[5]||(t[5]=n=>a.status=n),required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},t[12]||(t[12]=[N('<option value="">اختر الحالة</option><option value="جاري التنفيذ">جاري التنفيذ</option><option value="تحت المراجعة">تحت المراجعة</option><option value="مكتمل">مكتمل</option><option value="مؤجل">مؤجل</option>',5)]),512),[[V,a.status]])]),e("div",xe,[t[14]||(t[14]=e("label",{for:"projectImage",class:"block mb-1 font-semibold"},"صورة المشروع",-1)),e("input",{id:"projectImage",type:"file",accept:"image/*",onChange:g,class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,32)]),a.image?(b(),w("div",ye,[e("img",{src:a.image,alt:"معاينة الصورة",class:"w-24 h-24 rounded-full object-cover border mx-auto"},null,8,we)])):k("",!0)]),e("div",{class:"flex flex-col sm:flex-row justify-between gap-2 mt-6"},[e("button",{type:"button",onClick:u,class:"w-full sm:w-auto px-4 py-2 rounded bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200"}," إلغاء "),t[15]||(t[15]=e("button",{type:"submit",class:"w-full sm:w-auto px-4 py-2 rounded bg-secondary hover:bg-secondary-200 text-white"}," حفظ ",-1))])],32)])])):k("",!0)}},ke={class:"bg-white dark:bg-gray-800 w-full max-w-lg rounded-lg shadow-lg p-4 sm:p-6 relative mx-auto mt-16"},he={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},je={class:"mt-4"},De={key:0,class:"mt-2"},Ce=["src"],H={__name:"ModalEdit",props:{project:Object,visible:Boolean},emits:["close","update"],setup(j,{emit:f}){const i=j,d=f,a=q({id:null,name:"",manager:"",field:"",startDate:"",endDate:"",status:"",image:""});I(()=>i.project,c=>{c&&Object.assign(a,c)},{immediate:!0});function u(){d("close")}function g(){d("update",{...a}),u()}function x(c){const s=c.target.files[0];if(s){const t=new FileReader;t.onload=()=>{a.image=t.result},t.readAsDataURL(s)}}return(c,s)=>j.visible?(b(),w("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 overflow-y-auto px-2 py-6",onClick:$(u,["self"])},[e("div",ke,[e("button",{onClick:u,class:"absolute top-2 left-2 text-gray-400 hover:text-gray-700 text-3xl font-bold","aria-label":"إغلاق المودال"}," × "),s[15]||(s[15]=e("h2",{class:"text-xl font-bold mb-4 text-center text-gray-800 dark:text-white"}," تعديل بيانات المشروع ",-1)),e("form",{onSubmit:$(g,["prevent"]),class:"text-right text-gray-900 dark:text-gray-100"},[e("div",he,[e("div",null,[s[6]||(s[6]=e("label",{for:"name",class:"block mb-1 font-semibold"},"اسم المشروع",-1)),m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.name=t),id:"name",type:"text",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.name]])]),e("div",null,[s[7]||(s[7]=e("label",{for:"manager",class:"block mb-1 font-semibold"},"مدير المشروع",-1)),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.manager=t),id:"manager",type:"text",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.manager]])]),e("div",null,[s[8]||(s[8]=e("label",{for:"field",class:"block mb-1 font-semibold"},"المجال",-1)),m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.field=t),id:"field",type:"text",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.field]])]),e("div",null,[s[9]||(s[9]=e("label",{for:"startDate",class:"block mb-1 font-semibold"},"تاريخ البداية",-1)),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>a.startDate=t),id:"startDate",type:"date",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.startDate]])]),e("div",null,[s[10]||(s[10]=e("label",{for:"endDate",class:"block mb-1 font-semibold"},"تاريخ الانتهاء",-1)),m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>a.endDate=t),id:"endDate",type:"date",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},null,512),[[y,a.endDate]])]),e("div",null,[s[12]||(s[12]=e("label",{for:"status",class:"block mb-1 font-semibold"},"الحالة",-1)),m(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>a.status=t),id:"status",required:"",class:"w-full rounded border border-gray-300 dark:border-gray-600 p-2 bg-white dark:bg-gray-700"},s[11]||(s[11]=[e("option",{disabled:"",value:""},"اختر الحالة",-1),e("option",null,"جاري التنفيذ",-1),e("option",null,"تحت المراجعة",-1),e("option",null,"مكتمل",-1),e("option",null,"مؤجل",-1)]),512),[[V,a.status]])])]),e("div",je,[s[13]||(s[13]=e("label",{for:"image",class:"block mb-1 font-semibold"},"تعديل صورة المشروع",-1)),e("input",{id:"image",type:"file",accept:"image/*",onChange:x,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary-200"},null,32),a.image?(b(),w("div",De,[e("img",{src:a.image,alt:"معاينة الصورة",class:"w-24 h-24 rounded-full object-cover border mx-auto"},null,8,Ce)])):k("",!0)]),e("div",{class:"flex flex-col sm:flex-row justify-between gap-2 mt-6"},[e("button",{type:"button",onClick:u,class:"w-full sm:w-auto px-4 py-2 rounded bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200"}," إلغاء "),s[14]||(s[14]=e("button",{type:"submit",class:"w-full sm:w-auto px-4 py-2 rounded bg-primary hover:bg-primary-200 text-white"}," حفظ التعديلات ",-1))])],32)])])):k("",!0)}},$e={class:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3 px-4 relative font-sans",dir:"rtl"},Me={class:"relative w-full sm:w-64",dir:"rtl"},Fe={class:"bg-white dark:bg-gray-800 rounded shadow py-2 px-2"},Ve={class:"flex flex-row justify-between items-center mb-6 px-1 relative",dir:"rtl"},Ue={class:"relative inline-block"},Se={class:"overflow-x-auto max-w-full mt-4 md:mt-4 bg-white dark:bg-gray-800 p-2 rounded-lg shadow-lg"},Pe={id:"projectsTable",class:"min-w-[700px] w-full table-fixed text-sm md:text-base text-right border-collapse"},Te={class:"px-2 py-1 text-center"},qe={class:"px-2 py-1"},Ie=["src"],Ne={class:"px-2 py-1 break-words"},Oe={class:"px-2 py-1 break-words"},Ee={class:"px-2 py-1 break-words hidden md:table-cell"},Le={class:"px-2 py-1 break-words hidden md:table-cell"},ze={class:"px-2 py-1 break-words hidden md:table-cell"},Be={class:"px-2 py-1 flex flex-row-reverse gap-1 justify-end"},Re=["onClick"],Ae=["onClick"],Je={key:0},He={class:"flex justify-center gap-2 mt-6",dir:"ltr"},Ge=["disabled"],Qe={class:"flex items-center px-3 text-sm"},Ke=["disabled"],We={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50"},Xe={class:"bg-white dark:bg-gray-700 rounded p-6 max-w-sm w-full shadow-lg text-right",dir:"rtl"},Ye={class:"flex justify-end gap-4"},F=8,B="https://via.placeholder.com/40?text=No+Img",Ze={__name:"ProjectsTable",setup(j){const f=ne();function i(){f.push("/deleted-projects")}const d=v([]),a=v(""),u=v(!1),g=v(!1),x=v(!1),c=v(null),s=v({dateFrom:"",dateTo:"",status:"",department:""}),t=v(!1),n=v(null),p=v(1);function O(o){return o?new Date(o).toLocaleDateString("ar-EG"):""}function G(o){switch(o){case"مكتمل":return"text-green-600";case"جاري التنفيذ":return"text-yellow-600";case"متأخر":return"text-red-600";case"تحت المراجعة":return"text-blue-600";default:return"text-gray-600"}}function Q(o){n.value=o,t.value=!0}function K(){d.value=d.value.map(o=>o.id===n.value?{...o,deleted:!0}:o),U(),t.value=!1,n.value=null,p.value>M.value&&(p.value=M.value)}function U(){localStorage.setItem("projects",JSON.stringify(d.value))}function W(o){s.value=o}function X(){s.value={dateFrom:"",dateTo:"",status:"",department:""},u.value=!1}const E=S(()=>{let o=d.value.filter(l=>!l.deleted);if(a.value.trim()!==""){const l=a.value.trim().toLowerCase();o=o.filter(r=>r.name.toLowerCase().includes(l)||r.manager.toLowerCase().includes(l))}if(s.value.dateFrom){const l=new Date(s.value.dateFrom);o=o.filter(r=>new Date(r.startDate)>=l)}if(s.value.dateTo){const l=new Date(s.value.dateTo);o=o.filter(r=>new Date(r.endDate)<=l)}return s.value.status&&(o=o.filter(l=>l.status===s.value.status)),s.value.department&&(o=o.filter(l=>l.field===s.value.department)),o}),M=S(()=>Math.max(1,Math.ceil(E.value.length/F))),L=S(()=>{const o=(p.value-1)*F;return E.value.slice(o,o+F)});I([a,s],()=>{p.value=1}),A(()=>{const o=localStorage.getItem("projects");if(o)d.value=JSON.parse(o).map(l=>({...l,deleted:l.deleted??!1}));else{const l=[{id:1,name:"مشروع التعليم",manager:"محمد أحمد",field:"تعليمي",startDate:"2024-01-01",endDate:"2024-06-01",status:"جاري التنفيذ",image:"",deleted:!1},{id:2,name:"مشروع الصحة",manager:"علي سعيد",field:"صحي",startDate:"2024-02-15",endDate:"2024-07-15",status:"مكتمل",image:"",deleted:!1}];localStorage.setItem("projects",JSON.stringify(l)),d.value=l}});function Y(o){const l=d.value.length?Math.max(...d.value.map(r=>r.id))+1:1;d.value.unshift({id:l,name:o.name,manager:o.manager,field:o.field,startDate:o.startDate,endDate:o.endDate,status:o.status,image:o.image||B,deleted:!1}),U(),g.value=!1,p.value=1}function Z(o){const l=d.value.findIndex(r=>r.id===o.id);l!==-1&&(d.value[l]={...o},U()),x.value=!1}function _(o){c.value={...o},x.value=!0}return(o,l)=>(b(),w(z,null,[l[22]||(l[22]=N('<div class="bg-white dark:bg-gray-800 p-4 rounded shadow mb-6 transition-colors duration-500 flex items-end justify-between sticky top-0 z-30"><div class="text-right flex-1"><h1 class="text-2xl font-bold">المشاريع</h1><p class="text-sm text-gray-500 dark:text-gray-400">مرحباً بعودتك</p></div><div class="flex-shrink-0 ml-4"><img src="'+ue+'" alt="صورة المستخدم" class="w-12 h-12 rounded-full object-cover border-2 border-primary"></div></div>',1)),e("div",$e,[e("div",Me,[m(e("input",{"onUpdate:modelValue":l[0]||(l[0]=r=>a.value=r),type:"text",id:"searchInput",placeholder:"ابحث هنا...",class:"border border-gray-300 dark:border-gray-600 rounded pr-10 py-2 w-full focus:outline-none focus:ring-2 focus:ring-primary transition text-right bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"},null,512),[[y,a.value]]),l[8]||(l[8]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z"})])],-1))]),e("button",{onClick:l[1]||(l[1]=r=>g.value=!0),class:"bg-secondary hover:bg-secondary-200 text-white px-4 py-2 rounded w-full sm:w-auto flex items-center justify-center gap-2 transition"},l[9]||(l[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),P(" إضافة مشروع ",-1)]))]),e("div",Fe,[e("div",Ve,[l[11]||(l[11]=e("h2",{class:"text-right font-extrabold text-xl"},"بيانات المشاريع",-1)),e("div",Ue,[e("button",{onClick:l[2]||(l[2]=r=>u.value=!u.value),class:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-dark transition flex items-center gap-2"},l[10]||(l[10]=[e("i",{class:"fa-solid fa-filter"},null,-1),P(" تصفية ",-1)])),u.value?(b(),C(ve,{key:0,filters:s.value,"onUpdate:filters":W,onClearFilters:X,onClose:()=>u.value=!1},null,8,["filters","onClose"])):k("",!0)])]),e("div",Se,[e("table",Pe,[l[16]||(l[16]=e("thead",null,[e("tr",{class:"bg-primary text-white text-sm py-2"},[e("th",{class:"px-2 py-1 w-8"},"#"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words"},"الصورة"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words"},"اسم المشروع"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words"},"مدير المشروع"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words hidden md:table-cell"},"المجال"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words hidden md:table-cell"},"تاريخ البداية"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words hidden md:table-cell"},"تاريخ الانتهاء"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words hidden lg:table-cell"},"الحالة"),e("th",{class:"px-2 py-4 whitespace-nowrap break-words"},"الإجراءات")])],-1)),e("tbody",null,[(b(!0),w(z,null,de(L.value,(r,ee)=>(b(),w("tr",{key:r.id,class:"border-b border-gray-300 dark:border-gray-700 border-b-[0.5px]"},[e("td",Te,h((p.value-1)*F+ee+1),1),e("td",qe,[e("img",{src:r.image||B,alt:"صورة المشروع",class:"w-10 h-10 rounded-full object-cover"},null,8,Ie)]),e("td",Ne,h(r.name),1),e("td",Oe,h(r.manager),1),e("td",Ee,h(r.field),1),e("td",Le,h(O(r.startDate)),1),e("td",ze,h(O(r.endDate)),1),e("td",{class:T(["px-2 py-1 break-words hidden lg:table-cell",G(r.status)])},h(r.status),3),e("td",Be,[e("button",{class:"hover:bg-gray-300 text-green-600 hover:text-green-800 p-1 rounded",onClick:te=>_(r),title:"تعديل المشروع"},l[12]||(l[12]=[e("i",{class:"fa-solid fa-pen-to-square text-xl"},null,-1)]),8,Re),e("button",{class:"hover:bg-gray-300 text-red-600 hover:text-red-800 p-1 rounded",onClick:te=>Q(r.id),title:"حذف المشروع"},l[13]||(l[13]=[e("i",{class:"fa-solid fa-trash text-xl"},null,-1)]),8,Ae),l[14]||(l[14]=e("button",{class:"hover:bg-gray-300 text-blue-600 hover:text-blue-800 p-1 rounded",title:"عرض تفاصيل المشروع"},[e("i",{class:"fa-solid fa-info-circle text-xl"})],-1))])]))),128)),L.value.length===0?(b(),w("tr",Je,l[15]||(l[15]=[e("td",{colspan:"9",class:"text-center py-4 text-gray-500"}," لا توجد مشاريع لعرضها ",-1)]))):k("",!0)])])]),e("div",He,[e("button",{disabled:p.value===1,onClick:l[3]||(l[3]=r=>p.value--),class:"w-8 h-8 bg-primary text-white hover:bg-primary-200 flex items-center justify-center text-xs md:text-sm rounded-sm disabled:opacity-50 disabled:cursor-not-allowed"},l[17]||(l[17]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Ge),e("span",Qe," الصفحة "+h(p.value)+" من "+h(M.value),1),e("button",{disabled:p.value===M.value,onClick:l[4]||(l[4]=r=>p.value++),class:"w-8 h-8 bg-secondary text-white hover:bg-secondary-200 flex items-center justify-center text-xs md:text-sm rounded-sm disabled:opacity-50 disabled:cursor-not-allowed"},l[18]||(l[18]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Ke)])]),e("div",{class:"flex justify-start mt-4"},[e("button",{onClick:i,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition flex items-center gap-2"},l[19]||(l[19]=[e("i",{class:"fa-solid fa-trash"},null,-1),P(" المشاريع المحذوفة ",-1)]))]),g.value?(b(),C(J,{key:0,onClose:l[5]||(l[5]=r=>g.value=!1),onSave:Y})):k("",!0),D(H,{project:c.value,visible:x.value,onClose:l[6]||(l[6]=r=>x.value=!1),onUpdate:Z},null,8,["project","visible"]),t.value?(b(),w("div",We,[e("div",Xe,[l[20]||(l[20]=e("h3",{class:"text-lg font-semibold mb-4"},"تأكيد الحذف",-1)),l[21]||(l[21]=e("p",{class:"mb-6"},"هل أنت متأكد من حذف هذا المشروع؟",-1)),e("div",Ye,[e("button",{onClick:l[7]||(l[7]=r=>t.value=!1),class:"px-4 py-2 rounded border border-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 transition"}," إلغاء "),e("button",{onClick:K,class:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 transition"}," حذف ")])])])):k("",!0)],64))}},_e={id:"viewModal",class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50"},et={__name:"ModalView",props:["project"],emits:["close"],setup(j){return(f,i)=>(b(),w("div",_e,i[0]||(i[0]=[e("div",{class:"bg-white dark:bg-gray-800 w-full max-w-md mx-4 rounded-lg shadow-lg p-6 relative",onclick:"event.stopPropagation()"},[e("button",{onclick:"closeViewModal()",class:"absolute top-2 left-2 text-gray-400 hover:text-gray-700 text-3xl font-bold","aria-label":"إغلاق المودال"},"×"),e("h2",{class:"text-xl font-bold mb-6 text-center text-gray-800 dark:text-white"},"تفاصيل المشروع"),e("div",{class:"space-y-4 text-right text-gray-900 dark:text-gray-100"},[e("div",null,[e("span",{class:"font-semibold"},"اسم المشروع: "),e("span",{id:"viewProjectName"})]),e("div",null,[e("span",{class:"font-semibold"},"مدير المشروع: "),e("span",{id:"viewProjectManager"})]),e("div",null,[e("span",{class:"font-semibold"},"المجال: "),e("span",{id:"viewProjectField"})]),e("div",null,[e("span",{class:"font-semibold"},"تاريخ البداية: "),e("span",{id:"viewStartDate"})]),e("div",null,[e("span",{class:"font-semibold"},"تاريخ الانتهاء: "),e("span",{id:"viewEndDate"})]),e("div",null,[e("span",{class:"font-semibold"},"الحالة: "),e("span",{id:"viewProjectStatus"})]),e("div",null,[e("span",{class:"font-semibold"},"صورة المشروع: "),e("img",{id:"viewProjectImage",src:"",alt:"صورة المشروع",class:"mt-2 max-w-full h-auto rounded border border-gray-300 dark:border-gray-600"})])]),e("div",{class:"mt-6 text-center"},[e("button",{onclick:"closeViewModal()",class:"px-6 py-2 rounded bg-primary hover:bg-primary-200 text-white"},"إغلاق")])],-1)])))}},tt=R(et,[["__scopeId","data-v-d3d38a02"]]),lt={class:"flex flex-col md:flex-row min-h-screen relative"},nt={__name:"project",setup(j){const f=v(!1),i=v(!1),d=v(null),a=v(null);function u(s,t=null){d.value=s,a.value=t}function g(){d.value=null,a.value=null}function x(s){console.log("حفظ مشروع:",s),g()}function c(s){console.log("تحديث مشروع:",s),g()}return(s,t)=>{const n=ie("headermain");return b(),w("div",lt,[D(le,{onToggleMenu:t[0]||(t[0]=p=>f.value=!f.value)}),D(ae,{show:f.value},null,8,["show"]),D(se,{class:T(["hidden md:block",{"w-64":i.value,"w-20":!i.value}]),onMouseenter:t[1]||(t[1]=p=>i.value=!0),onMouseleave:t[2]||(t[2]=p=>i.value=!1)},null,8,["class"]),e("main",{id:"mainContent",class:T(["flex-1 p-4 pt-24 md:pt-2 transition-all duration-500 overflow-auto text-gray-900 dark:text-gray-100",{"opacity-50 pointer-events-none":f.value,"mr-0":f.value,"md:mr-48":i.value&&!f.value,"md:mr-20":!i.value&&!f.value}])},[D(n),e("div",null,[D(Ze,{onOpenAddModal:t[3]||(t[3]=p=>u("add")),onOpenEditModal:t[4]||(t[4]=p=>u("edit",p)),onOpenViewModal:t[5]||(t[5]=p=>u("view",p))}),d.value==="add"?(b(),C(J,{key:0,onClose:g,onSave:x})):k("",!0),d.value==="edit"?(b(),C(H,{key:1,project:a.value,onClose:g,onUpdate:c},null,8,["project"])):k("",!0),d.value==="view"?(b(),C(tt,{key:2,project:a.value,onClose:g},null,8,["project"])):k("",!0)])],2),D(oe)])}}};export{nt as default};
